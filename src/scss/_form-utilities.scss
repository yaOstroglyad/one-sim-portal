// ============================================== 
// FORM UTILITIES - Material Form Field and Form Component styles
// ==============================================

@import "variables";

// ==============================================
// COMMON FORM STYLES
// ==============================================

// Basic width utilities for forms
.full-width {
  width: 100%;
}

.w-100 {
  width: 100%;
}

// Error styling
.error {
  width: max-content;
  color: var(--cui-danger, #dc3545);
}

// New line utility
.new-line {
  display: block;
}

// Height utilities (specific to form context)
.height-100px {
  height: 100px;
}

// ==============================================
// HINT COMPONENT STYLES
// ==============================================

.hint {
  display: inline-flex;
  align-items: flex-start;
  gap: 4px;
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  margin-top: 4px;

  mat-icon {
    font-size: 14px !important;
    width: 14px !important;
    height: 14px !important;
    margin: 0;
    position: relative;
    top: 2px;
  }
}

// Dark theme support for hints
[data-coreui-theme="dark"] .hint {
  color: rgba(255, 255, 255, 0.6);
}

// ==============================================
// FORM LABEL STYLES (for non-Material components)
// ==============================================

.form-label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--cui-body-color);
  font-size: 0.875rem;

  .text-danger {
    color: var(--cui-danger, #dc3545);
    margin-left: 0.25rem;
  }
}

// Dark theme support for labels
[data-coreui-theme="dark"] .form-label {
  color: var(--cui-body-color);
}

// ==============================================
// FORM ARRAY STYLES
// ==============================================

.form-array-container {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.form-array-item {
  position: relative;
  padding: 1rem;
  background-color: var(--cui-gray-100);
  border: 1px solid var(--cui-border-color);
  border-radius: var(--cui-border-radius);
}

[data-coreui-theme="dark"] .form-array-item {
  background-color: var(--cui-gray-800);
}

.item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--cui-border-color);
}

.item-label {
  font-weight: 600;
  color: var(--cui-body-color);
}

.item-content {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.empty-message {
  text-align: center;
  padding: 2rem;
  color: var(--cui-text-medium);
  font-style: italic;
}

// ==============================================
// MATERIAL FORM FIELD MIXINS (for use in components)
// ==============================================

// Mixin for Material Form Field overrides
// Use this in component SCSS with @include material-form-field-overrides();
@mixin material-form-field-overrides() {
  ::ng-deep {
    .mat-mdc-form-field-hint-wrapper {
      padding: 0;
    }

    // ALWAYS hide subscript wrapper by default - zero DOM footprint
    .mat-mdc-form-field-subscript-wrapper {
      display: none !important;
    }

    // Show subscript wrapper when there are errors or when explicitly marked
    .mat-mdc-form-field-subscript-wrapper:has(.mat-error),
    .mat-mdc-form-field-subscript-wrapper:has(.mat-mdc-form-field-error),
    mat-form-field.has-active-hint .mat-mdc-form-field-subscript-wrapper,
    mat-form-field.has-active-error .mat-mdc-form-field-subscript-wrapper,
    mat-form-field.has-active-subscript-content .mat-mdc-form-field-subscript-wrapper {
      display: block !important;
      margin-top: 0.5rem;
    }

    // Additional safety: show when there's visible content
    .mat-mdc-form-field-subscript-wrapper:has(.mat-hint:not(:empty)),
    .mat-mdc-form-field-subscript-wrapper:has(.mat-error:not(:empty)),
    .mat-mdc-form-field-subscript-wrapper:has(.mat-mdc-form-field-hint:not(:empty)),
    .mat-mdc-form-field-subscript-wrapper:has(.mat-mdc-form-field-error:not(:empty)) {
      display: block !important;
      margin-top: 0.5rem;
    }

    // Force show for any mat-error elements
    .mat-mdc-form-field-subscript-wrapper .mat-error {
      display: block !important;
    }

    // Dynamic spacing utility classes (Tailwind-inspired)
    // Generate classes: mb-0, mb-0-25, mb-0-5, mb-0-75, mb-1, mb-1-25, mb-1-5, etc.

    // Common whole number classes
    .mb-0 { margin-bottom: 0rem !important; }
    .mb-1 { margin-bottom: 1rem !important; }
    .mb-2 { margin-bottom: 2rem !important; }
    .mb-3 { margin-bottom: 3rem !important; }
    .mb-4 { margin-bottom: 4rem !important; }
    .mb-5 { margin-bottom: 5rem !important; }

    // Quarter increment classes
    .mb-0-25 { margin-bottom: 0.25rem !important; }
    .mb-0-5 { margin-bottom: 0.5rem !important; }
    .mb-0-75 { margin-bottom: 0.75rem !important; }

    .mb-1-25 { margin-bottom: 1.25rem !important; }
    .mb-1-5 { margin-bottom: 1.5rem !important; }
    .mb-1-75 { margin-bottom: 1.75rem !important; }

    .mb-2-25 { margin-bottom: 2.25rem !important; }
    .mb-2-5 { margin-bottom: 2.5rem !important; }
    .mb-2-75 { margin-bottom: 2.75rem !important; }

    .mb-3-25 { margin-bottom: 3.25rem !important; }
    .mb-3-5 { margin-bottom: 3.5rem !important; }
    .mb-3-75 { margin-bottom: 3.75rem !important; }

    .mb-4-25 { margin-bottom: 4.25rem !important; }
    .mb-4-5 { margin-bottom: 4.5rem !important; }
    .mb-4-75 { margin-bottom: 4.75rem !important; }

    // Common spacing aliases for convenience
    .mb-sm { margin-bottom: 0.5rem !important; }   // 8px
    .mb-md { margin-bottom: 1rem !important; }     // 16px (default)
    .mb-lg { margin-bottom: 1.5rem !important; }   // 24px
    .mb-xl { margin-bottom: 2rem !important; }     // 32px
  }
}

// ==============================================
// DYNAMIC MARGIN UTILITIES FOR FORMS
// ==============================================

// Form-specific margin utilities that complement the global spacing system
// These provide more granular control for form field spacing

// Common whole number classes (form-specific)
.mb-form-0 { margin-bottom: 0rem !important; }
.mb-form-1 { margin-bottom: 1rem !important; }
.mb-form-2 { margin-bottom: 2rem !important; }
.mb-form-3 { margin-bottom: 3rem !important; }

// Quarter increment classes (form-specific)
.mb-form-0-25 { margin-bottom: 0.25rem !important; }
.mb-form-0-5 { margin-bottom: 0.5rem !important; }
.mb-form-0-75 { margin-bottom: 0.75rem !important; }

.mb-form-1-25 { margin-bottom: 1.25rem !important; }
.mb-form-1-5 { margin-bottom: 1.5rem !important; }
.mb-form-1-75 { margin-bottom: 1.75rem !important; }

// Form spacing aliases
.mb-form-sm { margin-bottom: 0.5rem !important; }   // 8px
.mb-form-md { margin-bottom: 1rem !important; }     // 16px (default)
.mb-form-lg { margin-bottom: 1.5rem !important; }   // 24px
.mb-form-xl { margin-bottom: 2rem !important; }     // 32px

// ==============================================
// FORM FIELD SPACING CLASSES
// ==============================================

// These classes are applied dynamically by form-generator utility functions
.has-active-hint {
  // Applied when field has an active hint message
}

.has-active-error {
  // Applied when field has validation errors
}

.has-active-subscript-content {
  // Applied when field has any subscript content (hints or errors)
}