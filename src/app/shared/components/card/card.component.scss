@import "../../../../scss/variables";
@import "../../../../scss/mixins";

// Base card styles using Tailwind principles
.os-card {
  background: var(--os-color-white);
  position: relative;
  display: flex;
  flex-direction: column;
  transition: all 0.2s ease;
  
  // Disable native tooltips for all child elements
  * {
    &[title]:not([title=""]) {
      position: relative;
      &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1;
        pointer-events: none;
      }
    }
  }

  // Border radius variants
  &--radius-none { border-radius: map-get($os-border-radius, 'none'); }
  &--radius-small { border-radius: map-get($os-border-radius, 'small'); }
  &--radius-medium { border-radius: map-get($os-border-radius, 'medium'); }
  &--radius-large { border-radius: map-get($os-border-radius, 'large'); }
  &--radius-xl { border-radius: map-get($os-border-radius, 'xl'); }

  // Card variants (Tailwind-inspired)
  &--default {
    border: 1px solid var(--os-color-light-shade);
    box-shadow: map-get($os-shadows, 'sm');
  }

  &--elevated {
    border: none;
    @include elevation(2);
    
    &:hover:not(.os-card--disabled) {
      @include elevation(3);
    }
  }

  &--outlined {
    border: 2px solid var(--os-color-light-shade);
    box-shadow: none;
  }

  &--ghost {
    border: none;
    box-shadow: none;
    background: transparent;
    
    &:hover:not(.os-card--disabled) {
      background: rgba(var(--os-color-light-rgb), 0.5);
    }
  }

  &--gradient {
    border: none;
    @include gradient-bg(var(--os-color-white), var(--os-color-primary-opacity-03));
    box-shadow: map-get($os-shadows, 'md');
  }

  &--glassmorphism {
    @include glassmorphism(12px, 0.7);
    box-shadow: map-get($os-shadows, 'lg');
  }

  // Size variants using spacing scale
  &--small {
    .os-card__header {
      padding: map-get($os-spacing, '3') map-get($os-spacing, '4') map-get($os-spacing, '2');
    }
    
    .os-card__content {
      padding: map-get($os-spacing, '2') map-get($os-spacing, '4');
    }
    
    .os-card__actions {
      padding: map-get($os-spacing, '2') map-get($os-spacing, '4') map-get($os-spacing, '3');
    }
    
    .os-card__title {
      font-size: map-get($os-font-sizes, 'sm');
      font-weight: 600;
    }
    
    .os-card__subtitle {
      font-size: map-get($os-font-sizes, 'xs');
    }
  }

  &--medium {
    .os-card__header {
      padding: map-get($os-spacing, '4') map-get($os-spacing, '5') map-get($os-spacing, '3');
    }
    
    .os-card__content {
      padding: map-get($os-spacing, '3') map-get($os-spacing, '5');
    }
    
    .os-card__actions {
      padding: map-get($os-spacing, '3') map-get($os-spacing, '5') map-get($os-spacing, '4');
    }
    
    .os-card__title {
      font-size: map-get($os-font-sizes, 'lg');
      font-weight: 600;
    }
    
    .os-card__subtitle {
      font-size: map-get($os-font-sizes, 'sm');
    }
  }

  &--large {
    .os-card__header {
      padding: map-get($os-spacing, '5') map-get($os-spacing, '6') map-get($os-spacing, '4');
    }
    
    .os-card__content {
      padding: map-get($os-spacing, '4') map-get($os-spacing, '6');
    }
    
    .os-card__actions {
      padding: map-get($os-spacing, '4') map-get($os-spacing, '6') map-get($os-spacing, '5');
    }
    
    .os-card__title {
      font-size: map-get($os-font-sizes, 'xl');
      font-weight: 700;
    }
    
    .os-card__subtitle {
      font-size: map-get($os-font-sizes, 'base');
    }
  }

  // Interactive state
  &--interactive {
    @include interactive-states();
  }

  // Selected state with primary color
  &--selected {
    border: 2px solid var(--os-color-primary);
    background: linear-gradient(
      135deg,
      var(--os-color-white) 0%,
      var(--os-color-primary-opacity-05) 100%
    );
    box-shadow: 0 0 0 3px rgba(var(--os-color-primary-rgb), 0.1);
  }

  // Disabled state
  &--disabled {
    @include disabled-state();
    
    .os-card__title,
    .os-card__subtitle,
    .os-card__content {
      color: var(--os-color-medium);
    }
  }

  // Loading state
  &--loading {
    @include loading-state();
  }

  // No padding modifier
  &--no-padding {
    .os-card__header,
    .os-card__content,
    .os-card__actions {
      padding: 0;
    }
  }

  // Generate border colors using global color system
  @include generate-border-colors('os-card');
  
  // Generate shadow colors
  @include generate-shadow-colors('os-card');

  // Card sections
  &__header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    border-bottom: 1px solid var(--os-color-light-shade);
    background: rgba(var(--os-color-light-rgb), 0.3);
    
    &-content {
      flex: 1;
      min-width: 0; // Allows text truncation
    }
    
    &-actions {
      flex-shrink: 0;
      margin-left: map-get($os-spacing, '3');
      display: flex;
      gap: map-get($os-spacing, '2');
      align-items: center;
    }
  }

  &__title {
    margin: 0 0 map-get($os-spacing, '1') 0;
    color: var(--os-color-dark);
    font-family: $primary-font;
    line-height: 1.4;
    @include truncate(1);
  }

  &__subtitle {
    margin: 0;
    color: var(--os-color-medium);
    font-family: $primary-font;
    font-weight: 400;
    line-height: 1.4;
    @include truncate(2);
  }

  &__content {
    flex: 1;
    color: var(--os-color-dark);
    font-family: $primary-font;
    line-height: 1.5;
    
    &:empty {
      display: none;
    }
  }

  &__actions {
    border-top: 1px solid var(--os-color-light-shade);
    background: rgba(var(--os-color-light-rgb), 0.2);
    display: flex;
    gap: map-get($os-spacing, '2');
    justify-content: flex-end;
    align-items: center;
    
    &:empty {
      display: none;
    }
  }
}

// Special variant combinations
.os-card {
  // Ghost variant removes header/action backgrounds
  &--ghost {
    .os-card__header,
    .os-card__actions {
      background: transparent;
      border: none;
    }
  }
  
  // Glassmorphism adjustments
  &--glassmorphism {
    .os-card__header,
    .os-card__actions {
      background: rgba(var(--os-color-white-rgb), 0.05);
    }
  }
}

// Animation classes
.os-card-enter {
  animation: slideInUp 0.3s ease-out;
}

.os-card-fade-in {
  animation: fadeIn 0.3s ease-out;
}